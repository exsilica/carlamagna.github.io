
********
# Exploratory Text Analysis
Workshop by [Sarah Stanley](https://twitter.com/sarcathtic) and Carolyn Moritz  
*2017/04/14*

********

# Playing with Shiny Apps
Shop talk  
*2017/03/22*

After much trial and error, I finally have embedded interactive apps on the site! I am posting the solution first for those who are less interested in the tales of my unsuccessful attempts, but more details can be found under the demo Old Faithful app in the **Breadcrumbs** section.

### Solution

Several other commenters on an [Embedded Shiny Apps](http://rmarkdown.rstudio.com/authoring_embedded_shiny.html) article described having the same problems I was with the `shinyAppDir()` embed approach. User [Liang C. Zhang](https://disqus.com/by/liangchengzhang/) recommended linking to shinyapps.io via iframe with regular HTML. I am happy to say this was successful, although I will add that I personally consider it a workaround, not a solution. I will continue to play around with `shinyAppDir()` and see what I learn. In the meantime, however, the iframe approach allows me to move forward with using this website for interactive applications.

<iframe src="https://exsilica.shinyapps.io/newshinyapp" style="border: none; width: 700px; height: 700px"></iframe>

### Breadcrumbs

Last Percolator session, I realized my best path forward was to create a [shinyapps.io](https://shinyapps.io) account to host my web applications. Although I have come across a few alternatives, including [RStudio Server](https://www.rstudio.com/products/rstudio/download-server/), the ability to quickly publish Shiny apps from RStudio to the web was in line with what I am already trying to do with Github Pages.  

R provides a demo version of virtually every feature it offers, making it really easy to quickly start testing with prefabricated code and data. I wanted to try two things: use inline code to embed a quick Shiny app, and refer to my newly-hosted shinyapps.io content as an external directory. For the first, I used the **cars** app referenced in the Percolator session under **Shiny Web Apps**. I attempted both `rsconnect::deployApp()` and `ShinyAppDir()` for internal embedding, with a few different syntax formats for the directory path. I had been certain the problem was in how I was entering the directory path until stumbling upon the aforementioned Embedded Shiny Apps comment thread and discovering many others have experienced the same difficulties as myself. It is possible that may still be the problem - I am accustomed to working in my local directory, and the app I am trying to deploy is being knit to an HTML document hosted online.  

This is becoming my de facto motto: "Further experimentation needed!"

********

# Intro to RMarkdown
Percolator session by Carolyn Moritz  
*2017/03/01*

**Percolator**: Open office hours here at the [Office of Digital Research & Scholarship](https://www.lib.fsu.edu/drs), located in the Scholars Commons of the FSU Strozier Library. We percolate on Wednesdays from 3:00 - 5:00pm EST, and while everybody is free to come consult, play, or just hang out, sometimes we theme our sessions. I have been a fan of the R language for three years now, but only just discovered RMarkdown last Friday and put up this website on Monday. I am eager to explore possible next steps, so this week's Percolator is in RMarkdown's honor! Here to join me are [Sarah Stanley](https://twitter.com/sarcathtic) and [Nicole Strayhorn](https://twitter.com/NickyStray), with occasional visits and jokes from [Bryan Brown](https://twitter.com/bryjbrown).  

### Initial Setup
To follow along on your own machine, first install [R](https://cran.r-project.org/) and [RStudio](https://www.rstudio.com/products/rstudio/).  
In the RStudio console, install the RMarkdown package and call the library: 
<br><br>
`install.packages("rmarkdown")`  
`library(rmarkdown)`  

**Reference Links**  
[Get Started](http://rmarkdown.rstudio.com/lesson-1.html)  
[RMarkdown Reference Guide](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf)  
[RMarkdown Cheatsheet](https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf)  
[Gallery](http://rmarkdown.rstudio.com/gallery.html)  

The following section is a handy reference provided by RStudio. To create it as an independent RMarkdown document: **File** -> **New File** -> **R Markdown...**  

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### RMarkdown

This is an RMarkdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.  

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:  

```{r cars}
summary(cars)
```

### Including Plots

You can also embed plots, for example:  

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.  

### Demonstration: Pushing to Site

Participants curious about this website setup are encouraged to visit [Like this setup?](setup.html) for notes on the resources I used.  

Pushing new content to the live site consists of three steps: **Knit**, **Commit**, and **Push**.  

Selecting **Knit HTML** ![](images/knit.png)  in the console opens a live preview window. If I had an RPub account synced to this console, I could select **Publish** ![](images/publish.png) and automatically send the generated HTML document to an RPub website. My configuration, however, requires two quick additional steps.  

We **commit** changes in the Version Control dropdown menu:      
![](images/versiondropdown.png)  

The left pane displays files that have been changed. Now we select **Staged** for all of them and add a useful commit message. We select **Commit**, close the confirmation window, and finally push the content to the site with **Push**.  

![](images/versioncontrol.png)    

Interesting to note: Occasionally, the commit will fail the first time, but succeed on a second attempt. Cursory reserach reveals that this is not an uncommon issue, but I have not yet uncovered the reason. As it does not occur in my home, it may possibly have to do with FSU's campus firewalls.  

We can quickly browse the available references (see **Reference Links** in the **Initial Setup** section) to get an idea of what RMarkdown can do. A significant note here is that, while this is an HTML website, RMarkdown has several other output formats available including presentations, word processing and PDF documents, notebooks, and [interactive content](http://rmarkdown.rstudio.com/lesson-14.html). This last output is what I want to explore in today's Percolator session.  


### Shiny Web Apps

Adding `runtime: shiny` to the YAML head (which is actually [not the same Pandoc markdown language we are using in the rest of the document](http://push.cwcon.org/learn/yaml-and-markdown.html)) allows us to call Shiny code right in the document. Once we do so, we can see that the **Knit HTML** option has changed to **Run Document** ![](images/rundoc.png).  

We first open a standalone Shiny app in RStudio to get an idea of how it behaves: **File** -> **New File** -> **Shiny Web App...** We select **Run App** ![](images/runapp.png) to run the auto-generated web application the sample text provides, which opens in an interactive preview window:    

![](images/shinyapp.png)  

Now we're playing! It's time to call some Shiny code into RMarkdown. I take the sample code from the [RMarkdown Cheatsheet](https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf) and pop it into our newly-minted **Shiny Web Apps** section.  

`{r, echo = FALSE}`  
`numericInput("n",`  
` "How many cars?", 5)`  
`renderTable({`  
` head(cars, input$n)`  
`})`  
  

We can play around with the **cars** app in the preview window, but here we run into publishing issues. Because **Run Document** has completely replaced the option to knit an HTML document, we cannot publish this to the site. Returning to our reference documents, we see that Shiny apps are server-side and, as browsers do not read R code, only run in an active R session. I take `runtime: shiny` out of the head so that I can knit the final results, supposing that the browser version will display a static screenshot. Instead RStudio calls an error: without `runtime: shiny`, it cannot call the code at all:  

![](images/shinyerror.png)  

I've instead changed the app markup to unexcuted code (what you see above) to display what we tried to run. It appears the best solution is to create a [shinyapps.io](http://shinyapps.io) account to publish my web apps, and link to them from there. I'll set that up in the following week, and in next week's session we can focus on navigating shinyapps.io as well as client-side **htmlwidgets**.  

Thank you Sarah, Nicole, and Bryan for a fun and informative exploratory session!  

********

# R & RStudio Setup

I made a [Research Guide](http://guides.lib.fsu.edu/text-analysis/r) covering installation, setup, the RStudio environment, and some quick tips. I will continue to update it based on the type of questions we get.